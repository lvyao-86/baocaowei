<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>04七天免登录</title>
	<script>
		window.onload = function(){
			var username = document.getElementById('username');
			var password = document.getElementById('password');
			var btnLogin = document.getElementById('btnLogin');
			var check = document.getElementById('check');

			btnLogin.onclick = function(){
				var _username = username.value;
				var _psw = password.value;

				var str1 = 'username=' + _username;
				var str2 = 'password=' + _psw;
				if(check.checked){
					//获得当前时间
					var now = new Date();
					//设置时间为当前时间的7天后
					now.setDate(now.getDate() + 7);
					// 有效期1分钟
					// now.setMinutes(now.getMinutes()+1);
								//now时间转成UTC（世界时间）
					str1 += ';expires=' + now.toUTCString();
					str2 += ';expires=' + now.toUTCString();
				}

				// 把用户名和密码存入cookie
				document.cookie = str1;
				document.cookie = str2;

				location.href = '04welcome.html';
			}


			// 刷新页面判断登录状态
			// 如果cookie中保存username和密码，直接跳转到登录后页面
			var cookies = document.cookie;
				//cookie是以键值对形式的文本组成
			if(cookies){
				var arr = cookies.split('; ');
				//变成由键值对组成的数组
				arr.forEach(function(item){
					var temp = item.split('=');
					if(temp[0] === 'username'){
						location.href = '04welcome.html';
					}
				});
			}
		}
	</script>
</head>
<body>
	<label for="username">用户名</document.cookielabel>
	<input type="text" id="username" name="username">

	<label for="password">用户名</label>
	<input type="password" id="password" name="password">
	<label><input type="checkbox" id="check">七天免登陆</label>
	<button id="btnLogin">登录</button>
</body>
</html>